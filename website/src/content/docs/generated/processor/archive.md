---
title: archive
---

<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the corresponding source file under internal/impl/<provider>.
-->

Archives all the messages of a batch into a single message according to the selected archive format.


Some archive formats (such as tar, zip) treat each archive item (message part) as a file with a path. Since message parts only contain raw data a unique path must be generated for each part. This can be done by using function interpolations on the 'path' field as described in xref:configuration:interpolation.adoc#bloblang-queries[Bloblang queries]. For types that aren't file based (such as binary) the file field is ignored.

The resulting archived message adopts the metadata of the _first_ message part of the batch.

The functionality of this processor depends on being applied across messages that are batched. You can find out more about batching xref:configuration:batching.adoc[in this doc].


## Examples
<tabs>
<tab title="Example 0">
	
If we had JSON messages in a batch each of the form:

```json
{"doc":{"id":"foo","body":"hello world 1"}}
```

And we wished to tar archive them, setting their filenames to their respective unique IDs (with the extension `.json`), our config might look like
this:
	<code-block lang="yaml">
		
pipeline:
  processors:
    - archive:
        format: tar
        path: ${!json("doc.id")}.json

	</code-block>
</tab>

</tabs>


## Fields
| Field | Type | Default | Description |
|:-------|:------|:---------|:-------------|
| `format` | `string` | `` | The archiving format to apply. |
| `path` | `string` | `""` | The path to set for each message in the archive (when applicable). |

