---
title: amqp_0_9
---

<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the corresponding source file under internal/impl/<provider>.
-->

Sends messages to an AMQP (0.91) exchange. AMQP is a messaging protocol used by various message brokers, including RabbitMQ.Connects to an AMQP (0.91) queue. AMQP is a messaging protocol used by various message brokers, including RabbitMQ.


The metadata from each message are delivered as headers.

It's possible for this output type to create the target exchange by setting `exchange_declare.enabled` to `true`, if the exchange already exists then the declaration passively verifies that the settings match.

TLS is automatic when connecting to an `amqps` URL, but custom settings can be enabled in the `tls` section.

The fields 'key', 'exchange' and 'type' can be dynamically set using xref:configuration:interpolation.adoc#bloblang-queries[function interpolations].




## Fields
| Field | Type | Default | Description |
|:-------|:------|:---------|:-------------|
| `urls` | `array` | `` | A list of URLs to connect to. The first URL to successfully establish a connection will be used until the connection is closed. If an item of the list contains commas it will be expanded into multiple URLs. |
| `exchange` | `string` | `` | An AMQP exchange to publish to. |
| `exchange_declare` | `object` | `` | Optionally declare the target exchange (passive). |
| `exchange_declare.enabled` | `bool` | `false` | Whether to declare the exchange. |
| `exchange_declare.type` | `string` | `"direct"` | The type of the exchange. |
| `exchange_declare.durable` | `bool` | `true` | Whether the exchange should be durable. |
| `key` | `string` | `""` | The binding key to set for each message. |
| `type` | `string` | `""` | The type property to set for each message. |
| `content_type` | `string` | `"application/octet-stream"` | The content type attribute to set for each message. |
| `content_encoding` | `string` | `""` | The content encoding attribute to set for each message. |
| `correlation_id` | `string` | `""` | Set the correlation ID of each message with a dynamic interpolated expression. |
| `reply_to` | `string` | `""` | Carries response queue name - set with a dynamic interpolated expression. |
| `expiration` | `string` | `""` | Set the per-message TTL |
| `message_id` | `string` | `""` | Set the message ID of each message with a dynamic interpolated expression. |
| `user_id` | `string` | `""` | Set the user ID to the name of the publisher.  If this property is set by a publisher, its value must be equal to the name of the user used to open the connection. |
| `app_id` | `string` | `""` | Set the application ID of each message with a dynamic interpolated expression. |
| `metadata` | `object` | `` | Specify criteria for which metadata values are attached to messages as headers. |
| `metadata.exclude_prefixes` | `array` | `[]` | Provide a list of explicit metadata key prefixes to be excluded when adding metadata to sent messages. |
| `priority` | `string` | `""` | Set the priority of each message with a dynamic interpolated expression. |
| `max_in_flight` | `int` | `64` | The maximum number of messages to have in flight at a given time. Increase this to improve throughput. |
| `persistent` | `bool` | `false` | Whether message delivery should be persistent (transient by default). |
| `mandatory` | `bool` | `false` | Whether to set the mandatory flag on published messages. When set if a published message is routed to zero queues it is returned. |
| `immediate` | `bool` | `false` | Whether to set the immediate flag on published messages. When set if there are no ready consumers of a queue then the message is dropped instead of waiting. |
| `timeout` | `string` | `""` | The maximum period to wait before abandoning it and reattempting. If not set, wait indefinitely. |
| `tls` | `object` | `` | Custom TLS settings can be used to override system defaults. |
| `tls.enabled` | `bool` | `false` | Whether custom TLS settings are enabled. |
| `tls.skip_cert_verify` | `bool` | `false` | Whether to skip server side certificate verification. |
| `tls.enable_renegotiation` | `bool` | `false` | Whether to allow the remote server to repeatedly request renegotiation. Enable this option if you're seeing the error message `local error: tls: no renegotiation`. |
| `tls.root_cas` | `string` | `""` | An optional root certificate authority to use. This is a string, representing a certificate chain from the parent trusted root certificate, to possible intermediate signing certificates, to the host certificate. |
| `tls.root_cas_file` | `string` | `""` | An optional path of a root certificate authority file to use. This is a file, often with a .pem extension, containing a certificate chain from the parent trusted root certificate, to possible intermediate signing certificates, to the host certificate. |
| `tls.client_certs` | `array` | `[]` | A list of client certificates to use. For each certificate either the fields `cert` and `key`, or `cert_file` and `key_file` should be specified, but not both. |
| `tls.client_certs[].cert` | `string` | `""` | A plain text certificate to use. |
| `tls.client_certs[].key` | `string` | `""` | A plain text certificate key to use. |
| `tls.client_certs[].cert_file` | `string` | `""` | The path of a certificate to use. |
| `tls.client_certs[].key_file` | `string` | `""` | The path of a certificate key to use. |
| `tls.client_certs[].password` | `string` | `""` | A plain text password for when the private key is password encrypted in PKCS#1 or PKCS#8 format. The obsolete `pbeWithMD5AndDES-CBC` algorithm is not supported for the PKCS#8 format.

Because the obsolete pbeWithMD5AndDES-CBC algorithm does not authenticate the ciphertext, it is vulnerable to padding oracle attacks that can let an attacker recover the plaintext. |

